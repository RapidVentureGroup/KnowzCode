{
  "name": "check-installation-status",
  "version": "1.0.0",
  "description": "Checks if KnowzCode is already installed in .claude/ directory and reports current status",

  "parameters": [],

  "actions": [
    {
      "type": "python",
      "code": "from pathlib import Path\nimport json\n\ntarget_dir = Path('.claude')\n\nif not target_dir.exists():\n    outputs['already_installed'] = False\n    outputs['commands_count'] = 0\n    outputs['skills_count'] = 0\n    outputs['subagents_count'] = 0\n    outputs['hooks_count'] = 0\n    outputs['settings_exists'] = False\n    exit()\n\n# Count existing components\ncommands_count = len(list((target_dir / 'commands').glob('*.yaml'))) if (target_dir / 'commands').exists() else 0\nskills_count = len(list((target_dir / 'skills').glob('*.json'))) if (target_dir / 'skills').exists() else 0\nsubagents_count = len(list((target_dir / 'subagents').glob('*.yaml'))) if (target_dir / 'subagents').exists() else 0\n\npre_hooks = len(list((target_dir / 'hooks' / 'pre-command').glob('*.js'))) if (target_dir / 'hooks' / 'pre-command').exists() else 0\npost_hooks = len(list((target_dir / 'hooks' / 'post-command').glob('*.js'))) if (target_dir / 'hooks' / 'post-command').exists() else 0\nhooks_count = pre_hooks + post_hooks\n\n# Check if settings.json exists\nsettings_path = target_dir / 'settings.json'\nsettings_exists = settings_path.exists()\n\nif settings_exists:\n    try:\n        with open(settings_path, 'r') as f:\n            settings = json.load(f)\n            outputs['settings_version'] = settings.get('metadata', {}).get('template_version', 'unknown')\n    except:\n        outputs['settings_version'] = 'error reading settings'\nelse:\n    outputs['settings_version'] = None\n\noutputs['already_installed'] = True\noutputs['commands_count'] = commands_count\noutputs['skills_count'] = skills_count\noutputs['subagents_count'] = subagents_count\noutputs['hooks_count'] = hooks_count\noutputs['settings_exists'] = settings_exists"
    }
  ]
}
